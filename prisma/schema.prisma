generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Report {
  id                          String   @id @default(uuid())
  clerkId                     String
  createdAt                   DateTime @default(now())
  updatedAt                   DateTime @updatedAt
  observations                String
  cause                       String
  actionTaken                 String
  position                    String
  location                    String
  procedure                   String   @default("not-observed")
  actionsAndPositions         String   @default("not-observed")
  permits                     String   @default("not-observed")
  isolationAndBarriers        String   @default("not-observed")
  personalProtectiveEquipment String   @default("not-observed")
  toolsAndEquipment           String   @default("not-observed")
  housekeeping                String   @default("not-observed")
  others                      String   @default("not-observed")
  reportType                  String   @default("positive-intervention")
  status                      String   @default("closed")
  shipId                      String
  ship                        Ship     @relation(fields: [shipId], references: [id])
}

model Ship {
  id      String   @id @default(cuid())
  name    String
  imo     String   @unique
  fleetId String?
  reports Report[]
  fleet   Fleet?   @relation(fields: [fleetId], references: [id])
}

model FleetUser {
  id      String @id @default(cuid())
  userId  String
  fleetId String
  fleet   Fleet  @relation(fields: [fleetId], references: [id])
}

model Fleet {
  id        String      @id @default(cuid())
  name      String
  createdAt DateTime    @default(now())
  users     FleetUser[]
  ships     Ship[]
}

model UserDevice {
  id            String   @id @default(uuid())
  userId        String
  expoPushToken String   @unique
  createdAt     DateTime @default(now())
}

model Feedback {
  id        String   @id @default(uuid())
  name      String   @default("anon")
  rating    Int
  comment   String
  createdAt DateTime @default(now())
}
